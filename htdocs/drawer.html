<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="bower_components/paper-item/paper-item.htm">
<link rel="import" href="bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="bower_components/iron-collapse/iron-collapse.html">

<dom-module id="x-drawer">
  <template>
    <iron-ajax auto
               url="/api/board-list"
               loading="{{ajaxLoading}}"
               last-response="{{ajaxResponse}}">
    </iron-ajax>

    <paper-dropdown-menu label="モード">
      <paper-listbox class="dropdown-content" selected="0">
        <paper-item>allosaurus</paper-item>
        <paper-item>brontosaurus</paper-item>
        <paper-item>carcharodontosaurus</paper-item>
        <paper-item>diplodocus</paper-item>
      </paper-listbox>
    </paper-dropdown-menu>

    <template is="dom-repeat" items="[[ajaxResponse]]" as="pre">
      <button id="[[index]]" on-click="_toggle">[[pre.category]]</button>
      <iron-collapse id$="col-[[index]]">
        <template is="dom-repeat" items="[[pre.boards]]">
          <a href="[[item.url]]">[[item.board]]</a>
        </template>
      </iron-collapse>
    </template>
  </template>

  <script>
  Polymer({
    is: 'x-drawer',

    _toggle: function(e) {
      this.$$("#col-" + e.target.id).toggle();
    }
  });
  </script>
</dom-module>
